(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{150:function(e,t,n){e.exports={changeDataForm:"change-data-form_changeDataForm__1NgnL",submitBtn:"change-data-form_submitBtn__2uiFs",choosePeriod:"change-data-form_choosePeriod__39pKV",choosePeriodItem:"change-data-form_choosePeriodItem__5qUmN",initialValue:"change-data-form_initialValue__389XS",costInput:"change-data-form_costInput__3yDu1"}},204:function(e,t,n){e.exports={checkbox:"create-exp-form_checkbox__2U6Nv",error:"create-exp-form_error__W-yZF",fieldError:"create-exp-form_fieldError__Q_t2q"}},206:function(e,t,n){e.exports={choosePeriod:"choosePeriod_choosePeriod__HVfpJ",choosePeriodItem:"choosePeriod_choosePeriodItem__ceR1o"}},220:function(e,t,n){e.exports={header:"header_header__2o1aY",headerMenu:"header_headerMenu__380yE"}},259:function(e,t,n){e.exports={table:"table_table__3EzUw",deleteBtn:"table_deleteBtn__pTHfJ"}},266:function(e,t,n){e.exports={footer:"footer_footer__jVOIr"}},295:function(e,t,n){},296:function(e,t,n){},395:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(37),s=n.n(o),i=(n(295),n(50)),u=(n(296),n(94)),l=n(26),d=n(204),b=n.n(d),j=n(414),h=n(416),p=n(412),O=n(396),f=n(31),x=n(254).create({baseURL:"https://my-expenses-table-app.herokuapp.com/api/",headers:{}}),m=function(e,t){return x.get("expensesData?year=".concat(e,"&month=").concat(t)).then((function(e){return e.data}))},g=function(e,t,n){return x.post("expensesData",{year:e,month:t,newExpenseData:n}).then((function(e){return e.data}))},v=function(e,t,n){return x.patch("expensesData",{year:e,month:t,newMonthData:n}).then((function(e){return e.data}))},_=function(e,t,n){return x.delete("expensesData?year=".concat(e,"&month=").concat(t,"&itemKey=").concat(n)).then((function(e){return e.data}))},y=String((new Date).getFullYear()),S=["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()];!function(e){e.GET_ALL_EXPENSES="expenses-app/tableData/GET_ALL_EXPENSES",e.SET_DATA_IS_LOADING="expenses-app/tableData/SET_DATA_IS_LOADING",e.SET_CUURENT_DATE="expenses-app/tableData/SET_CUURENT_DATE",e.SET_CHANGE_DATA_FORM_OPEN="expenses-app/tableData/SET_CHANGE_DATA_FORM_OPEN"}(a||(a={}));var E={dataSource:[],currentYear:y,currentMonth:S,dataSourceIsLoading:!1,currFieldNameChange:null,chancheFormIsOpen:!1,dataRowBeginModified:null,yearsInBD:[]},D=function(e){return{type:a.SET_DATA_IS_LOADING,isLoading:e}},C=function(e,t,n){return{type:a.SET_CHANGE_DATA_FORM_OPEN,currFieldNameChange:e,chancheFormIsOpen:t,dataRowBeginModified:n}},N=function(e,t){return function(n){return n(D(!0)),m(e,t).then((function(e){var t,r;"successfull"===e.resultCode&&n((t=e.expenses,r=e.years,{type:a.GET_ALL_EXPENSES,dataSource:t,yearsInBD:r})),n(D(!1))}))}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_ALL_EXPENSES:return Object(l.a)(Object(l.a)({},e),{},{dataSource:t.dataSource,yearsInBD:t.yearsInBD});case a.SET_DATA_IS_LOADING:return Object(l.a)(Object(l.a)({},e),{},{dataSourceIsLoading:t.isLoading});case a.SET_CUURENT_DATE:return Object(l.a)(Object(l.a)({},e),{},{currentYear:t.currentYear,currentMonth:t.currentMonth});case a.SET_CHANGE_DATA_FORM_OPEN:return Object(l.a)(Object(l.a)({},e),{},{currFieldNameChange:t.currFieldNameChange,chancheFormIsOpen:t.chancheFormIsOpen,dataRowBeginModified:t.dataRowBeginModified});default:return e}};function I(e){for(var t="";t.length<e;)t+=Math.random().toString(16).substring(2);return t.substring(0,e)}console.log("40-bit:"+I(10)),console.log("104-bit:"+I(26)),console.log("256-bit:"+I(58));var T=n(7);function L(e){var t={discription:"",cost:0,inThisMounth:!0,date:""},n=Object(r.useState)(t),a=Object(i.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)({discription:!1,cost:!1}),d=Object(i.a)(s,2),x=d[0],m=d[1],v=Object(f.d)((function(e){return e.tableData.currentYear})),_=Object(f.d)((function(e){return e.tableData.currentMonth})),y=Object(f.c)(),S=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;o(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},t,n))),m(n?Object(l.a)(Object(l.a)({},x),{},Object(u.a)({},t,!1)):Object(l.a)(Object(l.a)({},x),{},Object(u.a)({},t,!0)))};return Object(T.jsxs)(j.a,{open:e.showCreateExpenseForm,closeIcon:!0,onClose:function(){return e.setShowCreateExpenseForm(!1)},onOpen:function(){return e.setShowCreateExpenseForm(!0)},children:[Object(T.jsx)(h.a,{content:"Create new Expense"}),Object(T.jsx)(j.a.Content,{children:Object(T.jsxs)(p.a,{onSubmit:function(n){var a={key:I(26),discription:c.discription,cost:c.cost,date:c.date?c.date:_};y(function(e,t,n){return function(a){return g(e,t,n).then((function(n){"successfull"===n.resultCode&&a(N(e,t))}))}}(v,_,a)),e.setShowCreateExpenseForm(!1),o(t),n.preventDefault()},children:[Object(T.jsxs)(p.a.Field,{required:!0,children:[Object(T.jsx)("label",{children:"Discription:"}),Object(T.jsx)("textarea",{required:!0,placeholder:"Expense name",name:"discription",value:c.discription,onChange:S}),x.discription&&Object(T.jsx)("div",{className:b.a.error,children:"Require field"})]}),Object(T.jsxs)(p.a.Field,{required:!0,children:[Object(T.jsx)("label",{children:"Cost:"}),Object(T.jsx)("input",{type:"number",placeholder:"Expense cost",name:"cost",autoComplete:"off",value:c.cost,onChange:S,required:!0}),x.cost&&Object(T.jsx)("div",{className:b.a.error,children:"Require field"})]}),!c.inThisMounth&&Object(T.jsxs)(p.a.Field,{children:[Object(T.jsx)("label",{children:"Date:"}),Object(T.jsx)("input",{placeholder:"Expense date",name:"date",value:c.date,onChange:S,autoComplete:"off"})]}),Object(T.jsx)(p.a.Field,{children:Object(T.jsxs)("label",{className:b.a.checkbox,children:["In this mounth:",Object(T.jsx)("input",{type:"checkbox",name:"inThisMounth",checked:c.inThisMounth,onChange:S})]})}),Object(T.jsx)(O.a,{primary:!0,type:"submit",children:"Create"})]})})]})}var F=n(189),M=n(256),k=n(257),w=n(276),R=n(271),P=n(217),B=n.n(P),J=n(258),U=n(223),G=n(411),Y=n(413),q=n(417),z=n(60),V=n(410),H=n(106);function X(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)(H.a,{style:{fontSize:e.fontSize},spin:!0}),";"]})}var Z=n(259),K=n.n(Z),Q={header:{mainTitle:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432",menu:{language:"\u042f\u0437\u044b\u043a",russian:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",english:"\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438"}},months:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],addRowButton:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443",table:{expenses:"\u0417\u0430\u0442\u0440\u0430\u0442\u044b",cost:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",date:"\u0414\u0430\u0442\u0430",operations:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"},footer:"\u0412\u0441\u0435\u0433\u043e \u0437\u0430\u0442\u0440\u0430\u0442:"},W=c.a.createContext(Q),$=function(){return Object(r.useContext)(W)},ee=["index"],te=["title","editable","children","dataIndex","record","handleSave"],ne=c.a.createContext(null),ae=function(e){e.index;var t=Object(U.a)(e,ee),n=G.a.useForm(),a=Object(i.a)(n,1)[0];return Object(T.jsx)(G.a,{form:a,component:!1,children:Object(T.jsx)(ne.Provider,{value:a,children:Object(T.jsx)("tr",Object(l.a)({},t))})})},re=function(e){var t=e.title,n=e.editable,a=e.children,c=e.dataIndex,o=e.record,s=e.handleSave,d=Object(U.a)(e,te),b=Object(r.useState)(!1),j=Object(i.a)(b,2),h=j[0],p=j[1],O=Object(r.useRef)(null),f=Object(r.useContext)(ne);Object(r.useEffect)((function(){h&&O.current.focus()}),[h]);var x=function(){p(!h),f.setFieldsValue(Object(u.a)({},c,o[c]))},m=function(){var e=Object(J.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.validateFields();case 3:t=e.sent,x(),s(Object(l.a)(Object(l.a)({},o),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=a;return n&&(g=h?Object(T.jsx)(G.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(T.jsx)(Y.a,{ref:O,onPressEnter:m,onBlur:m})}):Object(T.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:x,children:a})),Object(T.jsx)("td",Object(l.a)(Object(l.a)({},d),{},{children:g}))},ce=function(e){Object(w.a)(n,e);var t=Object(R.a)(n);function n(e,a){var r;return Object(M.a)(this,n),(r=t.call(this,e)).renderNonEditableCell=function(e,t){var n=Object.keys(t).filter((function(n){return t[n]===e}))[0];return Object(T.jsx)("div",{onClick:function(){return r.props.setChangeDataFormOpen(n,!0,t)},children:t[n]})},r.handleDelete=function(e){_(r.props.currentYear,r.props.currentMonth,e).then((function(e){"successfull"===e.resultCode&&r.props.getAllExpensesData(r.props.currentYear,r.props.currentMonth)}))},r.handleAdd=function(){r.props.setShowCreateExpenseForm(!0)},r.handleSave=function(e){var t=Object(F.a)(r.props.dataSource),n=t.findIndex((function(t){return e.key===t.key})),a=t[n];t.splice(n,1,Object(l.a)(Object(l.a)({},a),e)),v(r.props.currentYear,r.props.currentMonth,t).then((function(e){"successfull"===e.resultCode&&r.props.getAllExpensesData(r.props.currentYear,r.props.currentMonth)}))},r.componentDidMount=function(){r.props.getAllExpensesData(r.props.currentYear,r.props.currentMonth)},r.columns=[{title:"Expenses",dataIndex:"discription",editable:!0},{title:"Cost",dataIndex:"cost",width:"12%",render:function(e,t){return r.renderNonEditableCell(e,t)}},{title:"Date",dataIndex:"date",width:"12%",editable:!1},{title:"operation",dataIndex:"operation",render:function(e,t){return r.props.dataSource.length>=1?Object(T.jsx)(q.a,{title:"Sure to delete?",onConfirm:function(){return r.handleDelete(t.key)},children:Object(T.jsx)("a",{children:"Delete"})}):null},width:"15%"}],r.state={count:null},r}return Object(k.a)(n,[{key:"render",value:function(){var e=this,t=this.props.dataSource,n={body:{row:ae,cell:re}},a=this.columns.map((function(t){return t.editable?Object(l.a)(Object(l.a)({},t),{},{onCell:function(n){return{record:n,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return Object(T.jsxs)("div",{children:[Object(T.jsx)(z.a,{onClick:this.handleAdd,type:"primary",style:{marginBottom:16},disabled:this.props.dataSourceIsLoading,children:this.context.addRowButton}),this.props.dataSourceIsLoading?Object(T.jsx)(X,{fontSize:54}):Object(T.jsx)(V.a,{className:K.a.table,components:n,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:a,pagination:!1})]})}}]),n}(c.a.Component);ce.contextType=W;var oe=Object(f.b)((function(e){return{dataSource:e.tableData.dataSource,dataSourceIsLoading:e.tableData.dataSourceIsLoading,currentYear:e.tableData.currentYear,currentMonth:e.tableData.currentMonth}}),{getAllExpensesData:N,setChangeDataFormOpen:C})(ce),se=(n(392),n(266)),ie=n.n(se),ue=function(){var e=$(),t=Object(f.d)((function(e){return e.tableData.dataSource})).map((function(e){return e.cost})).reduce((function(e,t){return e+t}),0);return Object(T.jsx)("div",{className:ie.a.footer,children:Object(T.jsxs)("div",{children:[" ",e.footer," ",t," "]})})},le=n(409),de=n(206),be=n.n(de),je=[{key:"January",value:"January",text:"January"},{key:"February",value:"February",text:"February"},{key:"March",value:"March",text:"March"},{key:"April",value:"April",text:"April"},{key:"May",value:"May",text:"May"},{key:"June",value:"June",text:"June"},{key:"July",value:"July",text:"July"},{key:"August",value:"August",text:"August"},{key:"September",value:"September",text:"September"},{key:"October",value:"October",text:"October"},{key:"November",value:"November",text:"November"},{key:"December",value:"December",text:"December"}],he=function(){var e=$().months,t=je.map((function(t,n){return Object(l.a)(Object(l.a)({},t),{},{text:e[n]})})),n=Object(f.d)((function(e){return e.tableData.yearsInBD})).map((function(e){return{key:e,value:e,text:e}})),c=Object(f.d)((function(e){return e.tableData.dataSourceIsLoading})),o=Object(r.useState)(y),s=Object(i.a)(o,2),u=s[0],d=s[1],b=Object(r.useState)(S),j=Object(i.a)(b,2),h=j[0],p=j[1],O=Object(f.c)();return Object(r.useEffect)((function(){var e,t;O((e=u,t=h,{type:a.SET_CUURENT_DATE,currentYear:e,currentMonth:t})),O(N(u,h))}),[u,h]),Object(T.jsxs)("div",{className:be.a.choosePeriod,children:[Object(T.jsx)(le.a,{placeholder:"Select year",value:u,options:n,className:be.a.choosePeriodItem,onChange:function(e,t){d(t.value)},disabled:c}),Object(T.jsx)(le.a,{placeholder:"Select month",value:h,options:t,className:be.a.choosePeriodItem,onChange:function(e,t){p(t.value)},disabled:c})]})},pe=n(150),Oe=n.n(pe),fe=n(419),xe=n(408);function me(){var e=Object(f.d)((function(e){return e.tableData.chancheFormIsOpen})),t=Object(f.d)((function(e){return e.tableData.dataRowBeginModified})),n=Object(f.d)((function(e){return e.tableData.currentYear})),a=Object(f.d)((function(e){return e.tableData.currentMonth})),c=Object(f.d)((function(e){return e.tableData.dataSource})),o=Object(r.useState)(!0),s=Object(i.a)(o,2),u=s[0],d=s[1],b=Object(r.useState)(""),x=Object(i.a)(b,2),m=x[0],g=x[1],_=Object(f.c)();return Object(T.jsxs)(j.a,{open:e,closeIcon:!0,onClose:function(){_(C(null,!1,null)),g(""),d(!0)},children:[Object(T.jsx)(h.a,{content:"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(T.jsx)(j.a.Content,{children:Object(T.jsxs)(p.a,{onSubmit:function(e){var r=Object(l.a)(Object(l.a)({},t),{},{cost:u?Number(t.cost)+Number(m):+m}),o=Object(F.a)(c).map((function(e){return e.key===r.key?r:e}));_(C(null,!1,null)),v(n,a,o).then((function(e){"successfull"===e.resultCode&&_(N(n,a))})),e.preventDefault()},className:Oe.a.changeDataForm,children:[Object(T.jsx)("div",{className:Oe.a.initialValue,children:null===t||void 0===t?void 0:t.cost}),Object(T.jsx)("div",{children:u?"\u041f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c":"\u0412\u0432\u0435\u0441\u0442\u0438 \u043d\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(T.jsx)(fe.a,{toggle:!0,checked:u,onChange:function(){return d(!u)}}),Object(T.jsx)("div",{children:Object(T.jsx)(xe.a,{required:!0,name:"cost",value:m,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443",autoComplete:"off",onChange:function(e,t){g(t.value)},type:"number",className:Oe.a.costInput})}),Object(T.jsx)(O.a,{primary:!0,type:"submit",className:Oe.a.submitBtn,children:"Save"})]})})]})}var ge,ve,_e=n(109),ye=n(192),Se=n(277),Ee=n(420),De=n(220),Ce=n.n(De);!function(e){e.RU="RU",e.EN="EN",e.header="header"}(ge||(ge={})),function(e){e.SET_LANG_LOCALIZATION="expenses-app/loalizationData/SET_LANG_LOCALIZATION"}(ve||(ve={}));var Ne={currentLang:ge.RU},Ae=function(e){return{type:ve.SET_LANG_LOCALIZATION,currentLang:e}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve.SET_LANG_LOCALIZATION:return Object(l.a)(Object(l.a)({},e),{},{currentLang:t.currentLang});default:return e}};function Te(){var e=Object(f.d)((function(e){return e.localizationData.currentLang})),t=$(),n=$().header.menu,a=Object(f.c)(),r=_e.a.SubMenu,c=Object(T.jsx)(_e.a,{children:Object(T.jsxs)(r,{title:n.language,children:[Object(T.jsxs)(_e.a.Item,{onClick:function(){return a(Ae(ge.RU))},children:[n.russian,e===ge.RU&&Object(T.jsx)(Se.a,{style:{paddingLeft:"5px"}})]},ge.RU),Object(T.jsxs)(_e.a.Item,{onClick:function(){return a(Ae(ge.EN))},children:[n.english,e===ge.EN&&Object(T.jsx)(Se.a,{style:{paddingLeft:"5px"}})]},ge.EN)]},"Language")});return Object(T.jsxs)("header",{className:Ce.a.header,children:[Object(T.jsxs)("h1",{style:{paddingTop:"25px"},children:[" ",t.header.mainTitle," "]}),Object(T.jsx)(ye.a,{overlay:c,className:Ce.a.headerMenu,children:Object(T.jsx)("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()},children:Object(T.jsx)(Ee.a,{style:{fontSize:"2em"}})})})]})}var Le={header:{mainTitle:"Expenses Table",menu:{language:"Language",russian:"Russia",english:"English"}},months:["January","February","March","April","May","June","July","August","September","October","November","December"],addRowButton:"Add a row",table:{expenses:"Expenses",cost:"Cost",date:"Date",operations:"Operations"},footer:"Total expenses:"};var Fe=function(){var e,t=Object(f.d)((function(e){return e.localizationData.currentLang})),n=Object(r.useState)(!1),a=Object(i.a)(n,2),c=a[0],o=a[1];return Object(T.jsx)(W.Provider,{value:(e=t,e===ge.RU?Q:Le),children:Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(Te,{}),Object(T.jsx)(he,{}),Object(T.jsx)(oe,{setShowCreateExpenseForm:o}),Object(T.jsx)(L,{setShowCreateExpenseForm:o,showCreateExpenseForm:c}),Object(T.jsx)(me,{}),Object(T.jsx)(ue,{})]})})},Me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,421)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},ke=n(270),we=n(207),Re=n(267),Pe=Object(we.b)({tableData:A,localizationData:Ie}),Be=Object(we.c)(Pe,Object(we.a)(Re.a));window.store=Be;var Je=Be;n(393);s.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(ke.a,{children:Object(T.jsx)(f.a,{store:Je,children:Object(T.jsx)(Fe,{})})})}),document.getElementById("root")),Me()}},[[395,1,2]]]);
//# sourceMappingURL=main.e7a47d3c.chunk.js.map