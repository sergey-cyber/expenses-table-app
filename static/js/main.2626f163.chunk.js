(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{147:function(e,t,n){e.exports={changeDataForm:"change-data-form_changeDataForm__1NgnL",submitBtn:"change-data-form_submitBtn__2uiFs",choosePeriod:"change-data-form_choosePeriod__39pKV",choosePeriodItem:"change-data-form_choosePeriodItem__5qUmN",initialValue:"change-data-form_initialValue__389XS",costInput:"change-data-form_costInput__3yDu1"}},199:function(e,t,n){e.exports={checkbox:"create-exp-form_checkbox__2U6Nv",error:"create-exp-form_error__W-yZF",fieldError:"create-exp-form_fieldError__Q_t2q"}},201:function(e,t,n){e.exports={choosePeriod:"choosePeriod_choosePeriod__HVfpJ",choosePeriodItem:"choosePeriod_choosePeriodItem__ceR1o"}},253:function(e,t,n){e.exports={table:"table_table__3EzUw",deleteBtn:"table_deleteBtn__pTHfJ"}},260:function(e,t,n){e.exports={footer:"footer_footer__jVOIr"}},286:function(e,t,n){},287:function(e,t,n){},386:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(37),s=n.n(o),i=(n(286),n(50)),u=(n(287),n(94)),l=n(30),d=n(199),b=n.n(d),j=n(407),p=n(409),h=n(405),O=n(387),f=n(33),x=n(248).create({baseURL:"https://my-expenses-table-app.herokuapp.com/api/",headers:{}}),m=function(e,t){return x.get("expensesData?year=".concat(e,"&month=").concat(t)).then((function(e){return e.data}))},v=function(e,t,n){return x.post("expensesData",{year:e,month:t,newExpenseData:n}).then((function(e){return e.data}))},_=function(e,t,n){return x.patch("expensesData",{year:e,month:t,newMonthData:n}).then((function(e){return e.data}))},g=function(e,t,n){return x.delete("expensesData?year=".concat(e,"&month=").concat(t,"&itemKey=").concat(n)).then((function(e){return e.data}))},S=String((new Date).getFullYear()),y=["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()];!function(e){e.GET_ALL_EXPENSES="expenses-app/tableData/GET_ALL_EXPENSES",e.SET_DATA_IS_LOADING="expenses-app/tableData/SET_DATA_IS_LOADING",e.SET_CUURENT_DATE="expenses-app/tableData/SET_CUURENT_DATE",e.SET_CHANGE_DATA_FORM_OPEN="expenses-app/tableData/SET_CHANGE_DATA_FORM_OPEN"}(a||(a={}));var D={dataSource:[],currentYear:S,currentMonth:y,dataSourceIsLoading:!1,currFieldNameChange:null,chancheFormIsOpen:!1,dataRowBeginModified:null,yearsInBD:[]},E=function(e){return{type:a.SET_DATA_IS_LOADING,isLoading:e}},C=function(e,t,n){return{type:a.SET_CHANGE_DATA_FORM_OPEN,currFieldNameChange:e,chancheFormIsOpen:t,dataRowBeginModified:n}},N=function(e,t){return function(n){return n(E(!0)),m(e,t).then((function(e){var t,r;"successfull"===e.resultCode&&n((t=e.expenses,r=e.years,{type:a.GET_ALL_EXPENSES,dataSource:t,yearsInBD:r})),n(E(!1))}))}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_ALL_EXPENSES:return Object(l.a)(Object(l.a)({},e),{},{dataSource:t.dataSource,yearsInBD:t.yearsInBD});case a.SET_DATA_IS_LOADING:return Object(l.a)(Object(l.a)({},e),{},{dataSourceIsLoading:t.isLoading});case a.SET_CUURENT_DATE:return Object(l.a)(Object(l.a)({},e),{},{currentYear:t.currentYear,currentMonth:t.currentMonth});case a.SET_CHANGE_DATA_FORM_OPEN:return Object(l.a)(Object(l.a)({},e),{},{currFieldNameChange:t.currFieldNameChange,chancheFormIsOpen:t.chancheFormIsOpen,dataRowBeginModified:t.dataRowBeginModified});default:return e}};function I(e){for(var t="";t.length<e;)t+=Math.random().toString(16).substring(2);return t.substring(0,e)}console.log("40-bit:"+I(10)),console.log("104-bit:"+I(26)),console.log("256-bit:"+I(58));var F=n(10);function T(e){var t={discription:"",cost:0,inThisMounth:!0,date:""},n=Object(r.useState)(t),a=Object(i.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)({discription:!1,cost:!1}),d=Object(i.a)(s,2),x=d[0],m=d[1],_=Object(f.d)((function(e){return e.tableData.currentYear})),g=Object(f.d)((function(e){return e.tableData.currentMonth})),S=Object(f.c)(),y=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;o(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},t,n))),m(n?Object(l.a)(Object(l.a)({},x),{},Object(u.a)({},t,!1)):Object(l.a)(Object(l.a)({},x),{},Object(u.a)({},t,!0)))};return Object(F.jsxs)(j.a,{open:e.showCreateExpenseForm,closeIcon:!0,onClose:function(){return e.setShowCreateExpenseForm(!1)},onOpen:function(){return e.setShowCreateExpenseForm(!0)},children:[Object(F.jsx)(p.a,{content:"Create new Expense"}),Object(F.jsx)(j.a.Content,{children:Object(F.jsxs)(h.a,{onSubmit:function(n){var a={key:I(26),discription:c.discription,cost:c.cost,date:c.date?c.date:g};S(function(e,t,n){return function(a){return v(e,t,n).then((function(n){"successfull"===n.resultCode&&a(N(e,t))}))}}(_,g,a)),e.setShowCreateExpenseForm(!1),o(t),n.preventDefault()},children:[Object(F.jsxs)(h.a.Field,{required:!0,children:[Object(F.jsx)("label",{children:"Discription:"}),Object(F.jsx)("textarea",{required:!0,placeholder:"Expense name",name:"discription",value:c.discription,onChange:y}),x.discription&&Object(F.jsx)("div",{className:b.a.error,children:"Require field"})]}),Object(F.jsxs)(h.a.Field,{required:!0,children:[Object(F.jsx)("label",{children:"Cost:"}),Object(F.jsx)("input",{type:"number",placeholder:"Expense cost",name:"cost",autoComplete:"off",value:c.cost,onChange:y,required:!0}),x.cost&&Object(F.jsx)("div",{className:b.a.error,children:"Require field"})]}),!c.inThisMounth&&Object(F.jsxs)(h.a.Field,{children:[Object(F.jsx)("label",{children:"Date:"}),Object(F.jsx)("input",{placeholder:"Expense date",name:"date",value:c.date,onChange:y,autoComplete:"off"})]}),Object(F.jsx)(h.a.Field,{children:Object(F.jsxs)("label",{className:b.a.checkbox,children:["In this mounth:",Object(F.jsx)("input",{type:"checkbox",name:"inThisMounth",checked:c.inThisMounth,onChange:y})]})}),Object(F.jsx)(O.a,{primary:!0,type:"submit",children:"Create"})]})})]})}var M=n(186),k=n(250),w=n(251),P=n(270),L=n(265),B=n(212),R=n.n(B),J=n(252),Y=n(217),G=n(404),U=n(406),q=n(410),V=n(60),H=n(403),X=n(106);function z(e){return Object(F.jsxs)("div",{children:[Object(F.jsx)(X.a,{style:{fontSize:e.fontSize},spin:!0}),";"]})}var K=n(253),Q=n.n(K),W=["index"],Z=["title","editable","children","dataIndex","record","handleSave"],$=c.a.createContext(null),ee=function(e){e.index;var t=Object(Y.a)(e,W),n=G.a.useForm(),a=Object(i.a)(n,1)[0];return Object(F.jsx)(G.a,{form:a,component:!1,children:Object(F.jsx)($.Provider,{value:a,children:Object(F.jsx)("tr",Object(l.a)({},t))})})},te=function(e){var t=e.title,n=e.editable,a=e.children,c=e.dataIndex,o=e.record,s=e.handleSave,d=Object(Y.a)(e,Z),b=Object(r.useState)(!1),j=Object(i.a)(b,2),p=j[0],h=j[1],O=Object(r.useRef)(null),f=Object(r.useContext)($);Object(r.useEffect)((function(){p&&O.current.focus()}),[p]);var x=function(){h(!p),f.setFieldsValue(Object(u.a)({},c,o[c]))},m=function(){var e=Object(J.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.validateFields();case 3:t=e.sent,x(),s(Object(l.a)(Object(l.a)({},o),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=a;return n&&(v=p?Object(F.jsx)(G.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(F.jsx)(U.a,{ref:O,onPressEnter:m,onBlur:m})}):Object(F.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:x,children:a})),Object(F.jsx)("td",Object(l.a)(Object(l.a)({},d),{},{children:v}))},ne=function(e){Object(P.a)(n,e);var t=Object(L.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).renderNonEditableCell=function(e,t){var n=Object.keys(t).filter((function(n){return t[n]===e}))[0];return Object(F.jsx)("div",{onClick:function(){return a.props.setChangeDataFormOpen(n,!0,t)},children:t[n]})},a.handleDelete=function(e){g(a.props.currentYear,a.props.currentMonth,e).then((function(e){"successfull"===e.resultCode&&a.props.getAllExpensesData(a.props.currentYear,a.props.currentMonth)}))},a.handleAdd=function(){a.props.setShowCreateExpenseForm(!0)},a.handleSave=function(e){var t=Object(M.a)(a.props.dataSource),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,Object(l.a)(Object(l.a)({},r),e)),_(a.props.currentYear,a.props.currentMonth,t).then((function(e){"successfull"===e.resultCode&&a.props.getAllExpensesData(a.props.currentYear,a.props.currentMonth)}))},a.componentDidMount=function(){a.props.getAllExpensesData(a.props.currentYear,a.props.currentMonth)},a.columns=[{title:"Expenses",dataIndex:"discription",editable:!0},{title:"Cost",dataIndex:"cost",width:"12%",render:function(e,t){return a.renderNonEditableCell(e,t)}},{title:"Date",dataIndex:"date",width:"12%",editable:!1},{title:"operation",dataIndex:"operation",render:function(e,t){return a.props.dataSource.length>=1?Object(F.jsx)(q.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.key)},children:Object(F.jsx)("a",{children:"Delete"})}):null},width:"15%"}],a.state={count:null},a}return Object(w.a)(n,[{key:"render",value:function(){var e=this,t=this.props.dataSource,n={body:{row:ee,cell:te}},a=this.columns.map((function(t){return t.editable?Object(l.a)(Object(l.a)({},t),{},{onCell:function(n){return{record:n,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return Object(F.jsxs)("div",{children:[Object(F.jsx)(V.a,{onClick:this.handleAdd,type:"primary",style:{marginBottom:16},disabled:this.state.startDataLoading,children:"Add a row"}),this.props.dataSourceIsLoading?Object(F.jsx)(z,{fontSize:54}):Object(F.jsx)(H.a,{className:Q.a.table,components:n,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:a,pagination:!1})]})}}]),n}(c.a.Component),ae=Object(f.b)((function(e){return{dataSource:e.tableData.dataSource,dataSourceIsLoading:e.tableData.dataSourceIsLoading,currentYear:e.tableData.currentYear,currentMonth:e.tableData.currentMonth}}),{getAllExpensesData:N,setChangeDataFormOpen:C})(ne),re=(n(383),n(260)),ce=n.n(re),oe=function(){var e=Object(f.d)((function(e){return e.tableData.dataSource})).map((function(e){return e.cost})).reduce((function(e,t){return e+t}),0);return Object(F.jsx)("div",{className:ce.a.footer,children:Object(F.jsxs)("div",{children:[" Total expenses: ",e," "]})})},se=n(402),ie=n(201),ue=n.n(ie),le=[{key:"January",value:"January",text:"January"},{key:"February",value:"February",text:"February"},{key:"March",value:"March",text:"March"},{key:"April",value:"April",text:"April"},{key:"May",value:"May",text:"May"},{key:"June",value:"June",text:"June"},{key:"July",value:"July",text:"July"},{key:"August",value:"August",text:"August"},{key:"September",value:"September",text:"September"},{key:"October",value:"October",text:"October"},{key:"November",value:"November",text:"November"},{key:"December",value:"December",text:"December"}],de=function(){var e=Object(f.d)((function(e){return e.tableData.yearsInBD})).map((function(e){return{key:e,value:e,text:e}})),t=Object(r.useState)(S),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(y),u=Object(i.a)(s,2),l=u[0],d=u[1],b=Object(f.c)();return Object(r.useEffect)((function(){var e,t;b((e=c,t=l,{type:a.SET_CUURENT_DATE,currentYear:e,currentMonth:t})),b(N(c,l))}),[c,l]),Object(F.jsxs)("div",{className:ue.a.choosePeriod,children:[Object(F.jsx)(se.a,{placeholder:"Select year",value:c,options:e,className:ue.a.choosePeriodItem,onChange:function(e,t){o(t.value)}}),Object(F.jsx)(se.a,{placeholder:"Select month",value:l,options:le,className:ue.a.choosePeriodItem,onChange:function(e,t){d(t.value)}})]})},be=n(147),je=n.n(be),pe=n(412),he=n(401);function Oe(){var e=Object(f.d)((function(e){return e.tableData.chancheFormIsOpen})),t=Object(f.d)((function(e){return e.tableData.dataRowBeginModified})),n=Object(f.d)((function(e){return e.tableData.currentYear})),a=Object(f.d)((function(e){return e.tableData.currentMonth})),c=Object(f.d)((function(e){return e.tableData.dataSource})),o=Object(r.useState)(!0),s=Object(i.a)(o,2),u=s[0],d=s[1],b=Object(r.useState)(""),x=Object(i.a)(b,2),m=x[0],v=x[1],g=Object(f.c)();return Object(F.jsxs)(j.a,{open:e,closeIcon:!0,onClose:function(){g(C(null,!1,null)),v(""),d(!0)},children:[Object(F.jsx)(p.a,{content:"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(F.jsx)(j.a.Content,{children:Object(F.jsxs)(h.a,{onSubmit:function(e){var r=Object(l.a)(Object(l.a)({},t),{},{cost:u?Number(t.cost)+Number(m):+m}),o=Object(M.a)(c).map((function(e){return e.key===r.key?r:e}));g(C(null,!1,null)),_(n,a,o).then((function(e){"successfull"===e.resultCode&&g(N(n,a))})),e.preventDefault()},className:je.a.changeDataForm,children:[Object(F.jsx)("div",{className:je.a.initialValue,children:null===t||void 0===t?void 0:t.cost}),Object(F.jsx)("div",{children:u?"\u041f\u0440\u0438\u0431\u0430\u0432\u0438\u0442\u044c":"\u0412\u0432\u0435\u0441\u0442\u0438 \u043d\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),Object(F.jsx)(pe.a,{toggle:!0,checked:u,onChange:function(){return d(!u)}}),Object(F.jsx)("div",{children:Object(F.jsx)(he.a,{required:!0,name:"cost",value:m,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443",autoComplete:"off",onChange:function(e,t){v(t.value)},type:"number",className:je.a.costInput})}),Object(F.jsx)(O.a,{primary:!0,type:"submit",className:je.a.submitBtn,children:"Save"})]})})]})}var fe=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(F.jsxs)("div",{className:"App",children:[Object(F.jsx)("h1",{style:{paddingTop:"25px"},children:"Expenses Table App"}),Object(F.jsx)(de,{}),Object(F.jsx)(ae,{setShowCreateExpenseForm:a}),Object(F.jsx)(T,{setShowCreateExpenseForm:a,showCreateExpenseForm:n}),Object(F.jsx)(Oe,{}),Object(F.jsx)(oe,{})]})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,413)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},me=n(264),ve=n(202),_e=n(261),ge=Object(ve.b)({tableData:A}),Se=Object(ve.c)(ge,Object(ve.a)(_e.a));window.store=Se;var ye=Se;n(384);s.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(me.a,{children:Object(F.jsx)(f.a,{store:ye,children:Object(F.jsx)(fe,{})})})}),document.getElementById("root")),xe()}},[[386,1,2]]]);
//# sourceMappingURL=main.2626f163.chunk.js.map