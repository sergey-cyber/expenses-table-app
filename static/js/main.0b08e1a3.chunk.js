(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{196:function(e,t,n){e.exports={checkbox:"create-exp-form_checkbox__2U6Nv",error:"create-exp-form_error__W-yZF",fieldError:"create-exp-form_fieldError__Q_t2q"}},198:function(e,t,n){e.exports={choosePeriod:"choosePeriod_choosePeriod__HVfpJ",choosePeriodItem:"choosePeriod_choosePeriodItem__ceR1o"}},250:function(e,t,n){e.exports={table:"table_table__3EzUw",deleteBtn:"table_deleteBtn__pTHfJ"}},257:function(e,t,n){e.exports={footer:"footer_footer__jVOIr"}},285:function(e,t,n){},286:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(35),s=n.n(o),i=(n(285),n(65)),u=(n(286),n(94)),l=n(30),d=n(196),b=n.n(d),p=n(404),j=n(407),h=n(402),x=n(405),O=n(57),f=n(245).create({baseURL:"https://my-expenses-table-app.herokuapp.com/api/",headers:{}}),m=function(e,t){return f.get("expensesData?year=".concat(e,"&month=").concat(t)).then((function(e){return e.data}))},v=function(e,t,n){return f.post("expensesData",{year:e,month:t,newExpenseData:n}).then((function(e){return e.data}))},S=function(e,t,n){return f.patch("expensesData",{year:e,month:t,newMonthData:n}).then((function(e){return e.data}))},y=function(e,t,n){return f.delete("expensesData?year=".concat(e,"&month=").concat(t,"&itemKey=").concat(n)).then((function(e){return e.data}))},E=String((new Date).getFullYear()),g=["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()-1];!function(e){e.GET_ALL_EXPENSES="expenses-app/tableData/GET_ALL_EXPENSES",e.SET_DATA_IS_LOADING="expenses-app/tableData/SET_DATA_IS_LOADING",e.SET_CUURENT_DATE="expenses-app/tableData/SET_CUURENT_DATE"}(a||(a={}));var _={dataSource:[],currentYear:E,currentMonth:g,dataSourceIsLoading:!1},D=function(e){return{type:a.SET_DATA_IS_LOADING,isLoading:e}},C=function(e,t){return function(n){return n(D(!0)),m(e,t).then((function(e){var t;"successfull"===e.resultCode&&n((t=e.expenses,{type:a.GET_ALL_EXPENSES,dataSource:t})),n(D(!1))}))}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_ALL_EXPENSES:return Object(l.a)(Object(l.a)({},e),{},{dataSource:t.dataSource});case a.SET_DATA_IS_LOADING:return Object(l.a)(Object(l.a)({},e),{},{dataSourceIsLoading:t.isLoading});case a.SET_CUURENT_DATE:return Object(l.a)(Object(l.a)({},e),{},{currentYear:t.currentYear,currentMonth:t.currentMonth});default:return e}};function T(e){for(var t="";t.length<e;)t+=Math.random().toString(16).substring(2);return t.substring(0,e)}console.log("40-bit:"+T(10)),console.log("104-bit:"+T(26)),console.log("256-bit:"+T(58));var k=n(12);function I(e){var t={discription:"",cost:0,inThisMounth:!0,date:""},n=Object(r.useState)(t),a=Object(i.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)({discription:!1,cost:!1}),d=Object(i.a)(s,2),f=d[0],m=d[1],S=Object(O.d)((function(e){return e.tableData.currentYear})),y=Object(O.d)((function(e){return e.tableData.currentMonth})),E=Object(O.c)(),g=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;o(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},t,n))),m(n?Object(l.a)(Object(l.a)({},f),{},Object(u.a)({},t,!1)):Object(l.a)(Object(l.a)({},f),{},Object(u.a)({},t,!0)))};return Object(k.jsxs)(p.a,{open:e.showCreateExpenseForm,closeIcon:!0,onClose:function(){return e.setShowCreateExpenseForm(!1)},onOpen:function(){return e.setShowCreateExpenseForm(!0)},children:[Object(k.jsx)(j.a,{content:"Create new Expense"}),Object(k.jsx)(p.a.Content,{children:Object(k.jsxs)(h.a,{onSubmit:function(n){var a={key:T(26),discription:c.discription,cost:c.cost,date:c.date?c.date:y};E(function(e,t,n){return function(a){return v(e,t,n).then((function(n){"successfull"===n.resultCode&&a(C(e,t))}))}}(S,y,a)),e.setShowCreateExpenseForm(!1),o(t),n.preventDefault()},children:[Object(k.jsxs)(h.a.Field,{required:!0,children:[Object(k.jsx)("label",{children:"Discription:"}),Object(k.jsx)("textarea",{required:!0,placeholder:"Expense name",name:"discription",value:c.discription,onChange:g}),f.discription&&Object(k.jsx)("div",{className:b.a.error,children:"Require field"})]}),Object(k.jsxs)(h.a.Field,{required:!0,children:[Object(k.jsx)("label",{children:"Cost:"}),Object(k.jsx)("input",{type:"number",placeholder:"Expense cost",name:"cost",value:c.cost,onChange:g,required:!0}),f.cost&&Object(k.jsx)("div",{className:b.a.error,children:"Require field"})]}),!c.inThisMounth&&Object(k.jsxs)(h.a.Field,{children:[Object(k.jsx)("label",{children:"Date:"}),Object(k.jsx)("input",{placeholder:"Expense date",name:"date",value:c.date,onChange:g})]}),Object(k.jsx)(h.a.Field,{children:Object(k.jsxs)("label",{className:b.a.checkbox,children:["In this mounth:",Object(k.jsx)("input",{type:"checkbox",name:"inThisMounth",checked:c.inThisMounth,onChange:g})]})}),Object(k.jsx)(x.a,{primary:!0,type:"submit",children:"Create"})]})})]})}var w=n(264),M=n(247),N=n(248),F=n(268),L=n(262),P=n(207),J=n.n(P),Y=n(249),U=n(212),R=n(401),q=n(403),G=n(408),B=n(58),z=n(400),X=n(105);function V(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(X.a,{style:{fontSize:e.fontSize},spin:!0}),";"]})}var H=n(250),K=n.n(H),Q=["index"],W=["title","editable","children","dataIndex","record","handleSave"],Z=c.a.createContext(null),$=function(e){e.index;var t=Object(U.a)(e,Q),n=R.a.useForm(),a=Object(i.a)(n,1)[0];return Object(k.jsx)(R.a,{form:a,component:!1,children:Object(k.jsx)(Z.Provider,{value:a,children:Object(k.jsx)("tr",Object(l.a)({},t))})})},ee=function(e){var t=e.title,n=e.editable,a=e.children,c=e.dataIndex,o=e.record,s=e.handleSave,d=Object(U.a)(e,W),b=Object(r.useState)(!1),p=Object(i.a)(b,2),j=p[0],h=p[1],x=Object(r.useRef)(null),O=Object(r.useContext)(Z);Object(r.useEffect)((function(){j&&x.current.focus()}),[j]);var f=function(){h(!j),O.setFieldsValue(Object(u.a)({},c,o[c]))},m=function(){var e=Object(Y.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.validateFields();case 3:t=e.sent,f(),s(Object(l.a)(Object(l.a)({},o),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=a;return n&&(v=j?Object(k.jsx)(R.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(k.jsx)(q.a,{ref:x,onPressEnter:m,onBlur:m})}):Object(k.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:f,children:a})),Object(k.jsx)("td",Object(l.a)(Object(l.a)({},d),{},{children:v}))},te=function(e){Object(F.a)(n,e);var t=Object(L.a)(n);function n(e){var a;return Object(M.a)(this,n),(a=t.call(this,e)).handleDelete=function(e){y(a.props.currentYear,a.props.currentMonth,e).then((function(e){"successfull"===e.resultCode&&a.props.getAllExpensesData(a.props.currentYear,a.props.currentMonth)}))},a.handleAdd=function(){a.props.setShowCreateExpenseForm(!0)},a.handleSave=function(e){var t=Object(w.a)(a.props.dataSource),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,Object(l.a)(Object(l.a)({},r),e)),S(a.props.currentYear,a.props.currentMonth,t).then((function(e){"successfull"===e.resultCode&&a.props.getAllExpensesData(a.props.currentYear,a.props.currentMonth)}))},a.componentDidMount=function(){a.props.getAllExpensesData(a.props.currentYear,a.props.currentMonth)},a.columns=[{title:"Expenses",dataIndex:"discription",editable:!0},{title:"Cost",dataIndex:"cost",editable:!0,width:"12%"},{title:"Date",dataIndex:"date",editable:!0,width:"12%"},{title:"operation",dataIndex:"operation",render:function(e,t){return a.props.dataSource.length>=1?Object(k.jsx)(G.a,{title:"Sure to delete?",onConfirm:function(){return a.handleDelete(t.key)},children:Object(k.jsx)("a",{children:"Delete"})}):null},width:"15%"}],a.state={count:null},a}return Object(N.a)(n,[{key:"render",value:function(){var e=this,t=this.props.dataSource,n={body:{row:$,cell:ee}},a=this.columns.map((function(t){return t.editable?Object(l.a)(Object(l.a)({},t),{},{onCell:function(n){return{record:n,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return Object(k.jsxs)("div",{children:[Object(k.jsx)(B.a,{onClick:this.handleAdd,type:"primary",style:{marginBottom:16},disabled:this.state.startDataLoading,children:"Add a row"}),this.props.dataSourceIsLoading?Object(k.jsx)(V,{fontSize:54}):Object(k.jsx)(z.a,{className:K.a.table,components:n,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:a,pagination:!1})]})}}]),n}(c.a.Component),ne=Object(O.b)((function(e){return{dataSource:e.tableData.dataSource,dataSourceIsLoading:e.tableData.dataSourceIsLoading,currentYear:e.tableData.currentYear,currentMonth:e.tableData.currentMonth}}),{getAllExpensesData:C})(te),ae=(n(382),n(257)),re=n.n(ae),ce=function(){var e=Object(O.d)((function(e){return e.tableData.dataSource})).map((function(e){return e.cost})).reduce((function(e,t){return e+t}),0);return Object(k.jsx)("div",{className:re.a.footer,children:Object(k.jsxs)("div",{children:[" Total expenses: ",e," "]})})},oe=n(399),se=n(198),ie=n.n(se),ue=[{key:"2020",value:"2020",text:"2020"},{key:"2021",value:"2021",text:"2021"}],le=[{key:"January",value:"January",text:"January"},{key:"February",value:"February",text:"February"},{key:"March",value:"March",text:"March"},{key:"April",value:"April",text:"April"},{key:"May",value:"May",text:"May"},{key:"June",value:"June",text:"June"},{key:"July",value:"July",text:"July"},{key:"August",value:"August",text:"August"},{key:"September",value:"September",text:"September"},{key:"October",value:"October",text:"October"},{key:"November",value:"November",text:"November"},{key:"December",value:"December",text:"December"}],de=function(){var e=Object(r.useState)(E),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(g),s=Object(i.a)(o,2),u=s[0],l=s[1],d=Object(O.c)();return Object(r.useEffect)((function(){var e,t;d((e=n,t=u,{type:a.SET_CUURENT_DATE,currentYear:e,currentMonth:t})),d(C(n,u))}),[n,u]),Object(k.jsxs)("div",{className:ie.a.choosePeriod,children:[Object(k.jsx)(oe.a,{placeholder:"Select year",value:n,options:ue,className:ie.a.choosePeriodItem,onChange:function(e,t){c(t.value)}}),Object(k.jsx)(oe.a,{placeholder:"Select month",value:u,options:le,className:ie.a.choosePeriodItem,onChange:function(e,t){l(t.value)}})]})};var be=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)("h1",{style:{paddingTop:"25px"},children:"Expenses Table App"}),Object(k.jsx)(de,{}),Object(k.jsx)(ne,{setShowCreateExpenseForm:a}),Object(k.jsx)(I,{setShowCreateExpenseForm:a,showCreateExpenseForm:n}),Object(k.jsx)(ce,{})]})},pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,410)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},je=n(261),he=n(199),xe=n(258),Oe=Object(he.b)({tableData:A}),fe=Object(he.c)(Oe,Object(he.a)(xe.a));window.store=fe;var me=fe;n(383);s.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(je.a,{children:Object(k.jsx)(O.a,{store:me,children:Object(k.jsx)(be,{})})})}),document.getElementById("root")),pe()}},[[385,1,2]]]);
//# sourceMappingURL=main.0b08e1a3.chunk.js.map